# OP Network Deployment Certification

## Overview

Implementation Providers (IPs) must pass automated tests to be certified for OP network deployment on Agglayer. Polygon will run these tests against the test network provided by the IP.

## Prerequisites

### Genesis Generation

IPs must generate their network genesis using Polygon's official tool available at: [createSovereignGenesis](https://github.com/agglayer/agglayer-contracts/tree/v12.1.0-rc.3/tools/createSovereignGenesis).

The genesis generated by this tool includes:
- **Agglayer contracts**
- **Agglayer fork of OP contracts** with native OP bridge disabled
- Required contract configurations for Agglayer integration

### Post-Genesis Validation

Polygon will perform post-genesis checks to verify that the network genesis file was created correctly and contains the required state. These checks validate:
- Proper contract deployment and configuration
- Correct Agglayer integration setup

*Note: Detailed documentation of these validation checks will be provided subsequently.*

## Test Suites

### 1. [conflicting-contract-calls.bats](https://github.com/agglayer/e2e/blob/main/tests/execution/conflicting-contract-calls.bats)
- Conflicting nonce transaction handling with same private key
- CDK-Erigon vs standard client behavior validation
- Transaction pool conflict resolution

### 2. [special-addresses.bats](https://github.com/agglayer/e2e/blob/main/tests/execution/special-addresses.bats)
- Transactions to well-known addresses (0x00-0x0A, 0xFF...FF)
- Reserved address handling
- Precompile address interactions

### 3. [smooth-crypto-lib.bats](https://github.com/agglayer/e2e/blob/main/tests/execution/smooth-crypto-lib.bats)
- SmoothCryptoLib deployment and interaction
- EIP-6565 cryptographic operations (BasePointMultiply, HashInternal, Verify, etc.)
- RIP-7212 signature verification
- ECDSAB4 verification tests
- Parallel cryptographic operations testing

### 4. [polycli-cases.bats](https://github.com/agglayer/e2e/blob/main/tests/execution/polycli-cases.bats)
- ERC20/ERC721 contract deployment and operations
- LoadTester contract storage operations with varying byte counts
- Uniswap v3 interactions
- Precompile stress testing
- Inscription transactions

### 5. [conflicting-transactions-to-pool.bats](https://github.com/agglayer/e2e/blob/main/tests/execution/conflicting-transactions-to-pool.bats)
- Future transaction submission with insufficient balance
- Transaction pool conflict handling
- Nonce management validation

### 6. [bridge-tests-suite.bats](https://github.com/agglayer/e2e/blob/main/tests/lxly/bridge-tests-suite.bats)
- L1â†”L2 bridge operations (parallel testing)
- Bridge contract interactions
- Claim deposit processing
- Multi-scenario bridge testing with concurrent execution

### 7. [Pectra Tests](https://github.com/agglayer/e2e/tree/main/tests/pectra) (EIP implementations)
- EIP-7702: Set Code for EOAs
- EIP-7691, EIP-7685, EIP-7623, EIP-2935, EIP-2537
- Ethereum hard fork compatibility

### 8. [simple-op-checks.bats](https://github.com/agglayer/e2e/blob/main/tests/op/simple-op-checks.bats)
- DA fee estimation and handling
- Concurrent transaction processing
- Gas price and limit validation
- Account sweeping with precise fee calculation

### 9. [OP Native Bridge Disable Test](https://github.com/agglayer/e2e/blob/main/tests/op/check-op-native-bridge.bats)
- Verification that OP native bridge (0x4200...0010) is properly disabled
- StandardBridge function call rejection

## Certification Process

1. **Test Network Setup**: IP provides accessible test network endpoint
2. **Automated Testing**: Polygon runs complete test suite against IP's network
3. **Results Review**: Pass/fail determination based on test outcomes
4. **Certification**: Approved IPs receive certification for OP network deployment

All tests must pass automated or manual testing for certification approval.

